(this["webpackJsonpfood-order-app-2"]=this["webpackJsonpfood-order-app-2"]||[]).push([[0],[,,function(e,t,a){e.exports={form:"Checkout_form__7E46X",control:"Checkout_control__3xitF",actions:"Checkout_actions__3d5sN",submit:"Checkout_submit__1Qicv",invalid:"Checkout_invalid__32Itz"}},function(e,t,a){e.exports={"cart-items":"Cart_cart-items__K6jqX",total:"Cart_total__Jqfkx",actions:"Cart_actions__PWnP1","button--alt":"Cart_button--alt__47jwA",button:"Cart_button__3A_Hi"}},function(e,t,a){e.exports={"cart-item":"CartItem_cart-item__DLIiU",summary:"CartItem_summary__MufE5",price:"CartItem_price__2ZVgU",amount:"CartItem_amount__1HRn5",actions:"CartItem_actions__Bz1ST"}},,function(e,t,a){e.exports={button:"HeaderCartButton_button__2eLrU",icon:"HeaderCartButton_icon__Snu5I",badge:"HeaderCartButton_badge__3RhOj",bump:"HeaderCartButton_bump__lj8sb"}},function(e,t,a){e.exports={meal:"MealItem_meal__A8JU0",description:"MealItem_description__35HKU",price:"MealItem_price__JFdQ4"}},function(e,t,a){e.exports={backdrop:"Modal_backdrop__14UMg",modal:"Modal_modal__3XJxY","slide-down":"Modal_slide-down__fGh24"}},,function(e,t,a){e.exports={header:"Header_header__1_LYB","main-image":"Header_main-image__sIhP1"}},function(e,t,a){e.exports={summary:"MealsSummary_summary__3q2xR"}},function(e,t,a){e.exports={card:"Card_card__qVuXW"}},function(e,t,a){e.exports={input:"Input_input__HIX9-"}},function(e,t,a){e.exports={form:"MealItemForm_form__zvs2N"}},function(e,t,a){e.exports={meals:"AvailableMeals_meals__1UiK6","meals-appear":"AvailableMeals_meals-appear__17uMw"}},,,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(5),c=a.n(n),s=(a(20),a(1)),o=a.n(s),i=a(0);var r=()=>Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(i.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})});var l=o.a.createContext({items:[],totalAmount:0,addItem:e=>{},removeItem:e=>{},clearCart:()=>{}}),d=a(6),m=a.n(d);var j=e=>{const[t,a]=Object(s.useState)(!1),n=Object(s.useContext)(l),{items:c}=n,o=c.reduce(((e,t)=>e+t.amount),0),d="".concat(m.a.button," ").concat(t?m.a.bump:"");return Object(s.useEffect)((()=>{if(0===c.length)return;a(!0);const e=setTimeout((()=>{a(!1)}),300);return()=>{clearTimeout(e)}}),[c]),Object(i.jsxs)("button",{className:d,onClick:e.onClick,children:[Object(i.jsx)("span",{className:m.a.icon,children:Object(i.jsx)(r,{})}),Object(i.jsx)("span",{children:"Your Cart"}),Object(i.jsx)("span",{className:m.a.badge,children:o})]})},u=a.p+"static/media/meals.2971f633.jpg",b=a(10),p=a.n(b);var h=e=>Object(i.jsxs)(s.Fragment,{children:[Object(i.jsxs)("header",{className:p.a.header,children:[Object(i.jsx)("h1",{children:"ReactMeals"}),Object(i.jsx)(j,{onClick:e.onShowCart})]}),Object(i.jsx)("div",{className:p.a["main-image"],children:Object(i.jsx)("img",{src:u,alt:"A table full of delicious food!"})})]}),x=a(11),O=a.n(x);var _=()=>Object(i.jsxs)("section",{className:O.a.summary,children:[Object(i.jsx)("h2",{children:"Delicious Food, Delivered To You"}),Object(i.jsx)("p",{children:"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."}),Object(i.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]}),v=a(12),C=a.n(v);var f=e=>Object(i.jsx)("div",{className:C.a.card,children:e.children}),y=a(13),g=a.n(y);var N=o.a.forwardRef(((e,t)=>Object(i.jsxs)("div",{className:g.a.input,children:[Object(i.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(i.jsx)("input",{ref:t,...e.input})]}))),I=a(14),A=a.n(I);var S=e=>{const[t,a]=Object(s.useState)(!0),n=Object(s.useRef)();return Object(i.jsxs)("form",{className:A.a.form,onSubmit:t=>{t.preventDefault();const c=n.current.value,s=+c;0===c.trim().length||s<1||s>5?a(!1):e.onAddToCart(s)},children:[Object(i.jsx)(N,{ref:n,label:"Amount",input:{id:"amount",type:"number",min:"1",max:"5",step:"1",defaultValue:"1"}}),Object(i.jsx)("button",{children:"+ Add"}),!t&&Object(i.jsx)("p",{children:"Please enter a valid amount (1-5)."})]})},k=a(7),w=a.n(k);var F=e=>{const t=Object(s.useContext)(l),a="$".concat(e.price.toFixed(2));return Object(i.jsxs)("li",{className:w.a.meal,children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:e.name}),Object(i.jsx)("div",{className:w.a.description,children:e.description}),Object(i.jsx)("div",{className:w.a.price,children:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)(S,{onAddToCart:a=>{t.addItem({id:e.id,name:e.name,amount:a,price:e.price})}})})]})},M=a(15),H=a.n(M);var E=()=>{const[e,t]=Object(s.useState)([]),[a,n]=Object(s.useState)(!1),[c,o]=Object(s.useState)("");Object(s.useEffect)((()=>{let e;n(!0);(async()=>{clearTimeout(e);try{const a=await fetch("https://react-http-2bc42-default-rtdb.asia-southeast1.firebasedatabase.app/meals.json",{method:"GET"});if(!a.ok)throw new Error("Fetch issue!");const c=await a.json(),s=Object.keys(c).map((e=>({id:e,name:c[e].name,description:c[e].description,price:c[e].price})));t(s),e=setTimeout((()=>{n(!1)}),2e3)}catch(c){console.log(c),o(c.message),n(!1)}})()}),[]);const r=e.map((e=>Object(i.jsx)(F,{id:e.id,name:e.name,description:e.description,price:e.price},e.id)));return Object(i.jsx)("section",{className:H.a.meals,children:Object(i.jsxs)(f,{children:[c&&Object(i.jsx)("p",{children:c}),a?Object(i.jsx)("p",{children:"Loading..."}):Object(i.jsx)("ul",{children:r})]})})};var B=()=>Object(i.jsxs)(s.Fragment,{children:[Object(i.jsx)(_,{}),Object(i.jsx)(E,{})]}),P=a(8),R=a.n(P);const D=e=>Object(i.jsx)("div",{className:R.a.backdrop,onClick:e.onClose}),T=e=>Object(i.jsx)("div",{className:R.a.modal,children:Object(i.jsx)("div",{className:R.a.content,children:e.children})}),J=document.getElementById("overlays");var U=e=>Object(i.jsxs)(s.Fragment,{children:[c.a.createPortal(Object(i.jsx)(D,{onClose:e.onClose}),J),c.a.createPortal(Object(i.jsx)(T,{children:e.children}),J)]}),z=a(4),q=a.n(z);var L=e=>{const t="$".concat(e.price.toFixed(2));return Object(i.jsxs)("li",{className:q.a["cart-item"],children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:e.name}),Object(i.jsxs)("div",{className:q.a.summary,children:[Object(i.jsx)("span",{className:q.a.price,children:t}),Object(i.jsxs)("span",{className:q.a.amount,children:["x ",e.amount]})]})]}),Object(i.jsxs)("div",{className:q.a.actions,children:[Object(i.jsx)("button",{onClick:e.onRemove,children:"\u2212"}),Object(i.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})},V=a(3),X=a.n(V),Y=a(2),K=a.n(Y);const $={name:"",street:"",postalCode:"",city:""},G=(e,t)=>"nameInput"===t.type?{name:t.value,street:e.street,postalCode:e.postalCode,city:e.city}:"streetInput"===t.type?{name:e.name,street:t.value,postalCode:e.postalCode,city:e.city}:"postalCodeInput"===t.type?{name:e.name,street:e.street,postalCode:t.value,city:e.city}:"cityInput"===t.type?{name:e.name,street:e.street,postalCode:e.postalCode,city:t.value}:$;var Q=e=>{const t=Object(s.useContext)(l),[a,n]=Object(s.useState)({name:!1,street:!1,postalCode:!1,city:!1}),[c,o]=Object(s.useReducer)(G,$),r=c.name.trim().length>0,d=c.street.trim().length>0,m=5===c.postalCode.trim().length,j=c.city.trim().length>0,u=!r&&a.name,b=!d&&a.street,p=!m&&a.postalCode,h=!j&&a.city,x=r&&d&&m&&j;console.log(x);const O="".concat(K.a.control," ").concat(u?K.a.invalid:null),_="".concat(K.a.control," ").concat(b?K.a.invalid:null),v="".concat(K.a.control," ").concat(p?K.a.invalid:null),C="".concat(K.a.control," ").concat(h?K.a.invalid:null);return Object(i.jsx)(s.Fragment,{children:Object(i.jsxs)("form",{className:K.a.form,onSubmit:a=>{a.preventDefault(),e.onIsSubmitting(!0);const n={items:t.items,customerData:c};console.log(t.items);(async()=>{try{const e=await fetch("https://react-http-2bc42-default-rtdb.asia-southeast1.firebasedatabase.app/orders.json",{method:"POST",body:JSON.stringify(n),headers:{"Content-type":"application/json"}});if(!e.ok)throw new Error(e.error)}catch(a){console.log(a.message),alert(a.message)}e.onIsSubmitting(!1),e.onDidSubmit(!0),t.clearCart()})()},children:[Object(i.jsxs)("div",{className:O,children:[Object(i.jsx)("label",{htmlFor:"name",children:"Your Name"}),Object(i.jsx)("input",{id:"name",type:"text",value:c.name,onChange:e=>{o({type:"nameInput",value:e.target.value})},onBlur:()=>{n((e=>({...e,name:!0})))}}),u&&Object(i.jsx)("p",{children:"Please enter a valid name!"})]}),Object(i.jsxs)("div",{className:_,children:[Object(i.jsx)("label",{htmlFor:"street",children:"Street"}),Object(i.jsx)("input",{id:"street",type:"text",value:c.street,onChange:e=>{o({type:"streetInput",value:e.target.value})},onBlur:()=>{n((e=>({...e,street:!0})))}}),b&&Object(i.jsx)("p",{children:"Please enter a valid street!"})]}),Object(i.jsxs)("div",{className:v,children:[Object(i.jsx)("label",{htmlFor:"postalCode",children:"Postal Code"}),Object(i.jsx)("input",{id:"postalCode",type:"text",value:c.postalCode,onChange:e=>{o({type:"postalCodeInput",value:e.target.value})},onBlur:()=>{n((e=>({...e,postalCode:!0})))}}),p&&Object(i.jsx)("p",{children:"Please enter a valid postal code (5 characters long)!"})]}),Object(i.jsxs)("div",{className:C,children:[Object(i.jsx)("label",{htmlFor:"city",children:"City"}),Object(i.jsx)("input",{id:"city",type:"text",value:c.city,onChange:e=>{o({type:"cityInput",value:e.target.value})},onBlur:()=>{n((e=>({...e,city:!0})))}}),h&&Object(i.jsx)("p",{children:"Please enter a valid city!"})]}),Object(i.jsxs)("div",{className:K.a.actions,children:[Object(i.jsx)("button",{type:"button",onClick:e.onCancel,children:"Cancel"}),Object(i.jsx)("button",{className:K.a.submit,type:"submit",disabled:!x,children:"Confirm"})]})]})})};var W=e=>{const[t,a]=Object(s.useState)(!1),[n,c]=Object(s.useState)(!1),[r,d]=Object(s.useState)(!1),m=Object(s.useContext)(l),j="$".concat(m.totalAmount.toFixed(2)),u=m.items.length>0,b=e=>{m.removeItem(e)},p=e=>{m.addItem(e)},h=Object(i.jsx)("ul",{className:X.a["cart-items"],children:m.items.map((e=>Object(i.jsx)(L,{name:e.name,amount:e.amount,price:e.price,onRemove:b.bind(null,e.id),onAdd:p.bind(null,e)},e.id)))}),x=Object(i.jsxs)("div",{className:X.a.actions,children:[Object(i.jsx)("button",{className:X.a["button--alt"],onClick:e.onClose,children:"Close"}),u&&Object(i.jsx)("button",{className:X.a.button,onClick:()=>{a(!0)},children:"Order"})]}),O=Object(i.jsxs)(o.a.Fragment,{children:[h,Object(i.jsxs)("div",{className:X.a.total,children:[Object(i.jsx)("span",{children:"Total Amount"}),Object(i.jsx)("span",{children:j})]}),t&&Object(i.jsx)(Q,{onIsSubmitting:e=>{c(e)},onDidSubmit:e=>{d(e)},onCancel:()=>{a(!1)}}),!t&&x]}),_=Object(i.jsx)("p",{children:"Submitting..."}),v=Object(i.jsxs)(o.a.Fragment,{children:[Object(i.jsx)("p",{children:"Successfully submitted!!"}),Object(i.jsx)("div",{className:X.a.actions,children:Object(i.jsx)("button",{className:X.a["button--alt"],onClick:e.onClose,children:"Close"})})]});return Object(i.jsxs)(U,{onClose:e.onClose,children:[!n&&!r&&O,n&&!r&&_,!n&&r&&v]})};const Z={items:[],totalAmount:0},ee=(e,t)=>{if("ADD"===t.type){const a=e.totalAmount+t.item.price*t.item.amount,n=e.items.findIndex((e=>e.id===t.item.id)),c=e.items[n];let s;if(c){const a={...c,amount:c.amount+t.item.amount};s=[...e.items],s[n]=a}else s=e.items.concat(t.item);return{items:s,totalAmount:a}}if("REMOVE"===t.type){const a=e.items.findIndex((e=>e.id===t.id)),n=e.items[a],c=e.totalAmount-n.price;let s;if(1===n.amount)s=e.items.filter((e=>e.id!==t.id));else{const t={...n,amount:n.amount-1};s=[...e.items],s[a]=t}return{items:s,totalAmount:c}}return t.type,Z};var te=e=>{const[t,a]=Object(s.useReducer)(ee,Z),n={items:t.items,totalAmount:t.totalAmount,addItem:e=>{a({type:"ADD",item:e})},removeItem:e=>{a({type:"REMOVE",id:e})},clearCart:()=>{a({type:"CLEAR"})}};return Object(i.jsx)(l.Provider,{value:n,children:e.children})};var ae=function(){const[e,t]=Object(s.useState)(!1);return Object(i.jsxs)(te,{children:[e&&Object(i.jsx)(W,{onClose:()=>{t(!1)}}),Object(i.jsx)(h,{onShowCart:()=>{t(!0)}}),Object(i.jsx)("main",{children:Object(i.jsx)(B,{})})]})};c.a.render(Object(i.jsx)(ae,{}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.dc55b1f9.chunk.js.map